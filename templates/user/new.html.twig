{% extends 'baseF.html.twig' %}

{% block title %}Register{% endblock %}

{% block content %}
        
<style>
  /* Set font and background color for the whole form */
  form {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    padding: 20px;
    border-radius: 10px;
  }

  /* Style the heading */
  h1 {
    font-size: 2rem;
    color: #AA336A;
    text-shadow: 1px 1px 2px #000000;
    text-align: center;
    margin-bottom: 20px;
  }

  /* Style the form fields */
  .form-control {
    border: none;
    border-radius: 5px;
    background-color: #fff;
    padding: 10px;
    font-size: 16px;
    margin-bottom: 10px;
    box-shadow: 1px 1px 2px #ccc;
  }

  /* Style the label */
  label {
    font-weight: bold;
    margin-bottom: 5px;
    display: block;
  }

  /* Style the submit button */
  .btn-primary {
    background-color: #20247b;
    color: #fff;
    border: none;
    border-radius: 5px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .btn-primary:hover {
    background-color: #1a1e6e;
  }
</style>

<section class="section about-section gray-bg" id="about">
<div class="container">
        <div class="col"></div>
         <h1>Sign Up</h1>
    <div class="col-sm-12">
    <br><br>

      <!-- Start the form and add a class attribute to it -->
      {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'enctype': 'multipart/form-data'}}) }}
    
      <!-- The input fields for name, username, email, and password -->
      <div class="form-group">
        {{ form_row(form.name, {'attr': {'class': 'form-control', 'placeholder': 'Name', 'id': 'name'}}) }}
      </div>
    
      <div class="form-group">
        {{ form_row(form.username, {'attr': {'class': 'form-control', 'placeholder': 'Username', 'id': 'username'}}) }}
      </div>
    
      <div class="form-group">
        {{ form_row(form.email, {'attr': {'class': 'form-control', 'placeholder': 'Email', 'id': 'email'}}) }}
      </div>

      <div class="form-group">
        {{ form_row(form.phonenumber, {'attr': {'class': 'form-control', 'placeholder': 'phoneNumber', 'id': 'phonenumber'}}) }}
      </div>
    
      <!-- The input field for birthday -->
      <div class="form-group">
        {{ form_row(form.birthday, {'attr': {'class': 'form-control', 'id': 'birthday'}}) }}
      </div>
      

    <div class="form-group">
    {{ form_row(form.password, {'attr': {'class': 'form-control', 'id': 'password'}}) }}
</div>

  <div class="form-group">
        {{ form_row(form.role, {'attr': {'class': 'form-control'}}) }}
    </div>
    <div class="form-group">
    {{ form_widget(form.file, {'attr': {'class': 'form-control blogImageFile', 'id': form.file.vars.id, 'onchange': 'updatePreviewImage(this)'}}) }}

<img id="preview-image" style="max-width: 128px">

<script>
function updatePreviewImage(input) {
    var preview = document.getElementById('preview-image');
    var file = input.files[0];
    var reader = new FileReader();

    reader.onloadend = function () {
        preview.src = reader.result;
    }

    if (file) {
        reader.readAsDataURL(file);
    } else {
        preview.src = "";
    }
}
</script>




    <br></br>  
        
        <div class="button" style="text-align: center">
    <button type="submit" class="btn btn-outline-primary mr-2" id="submitBtn">
        {{ button_label|default('Register') }}
    </button>
</div>
    {{ form_end(form) }}
</div>
</div>
</div>
</div>  
</div>

</section>
{% endblock %}

{% block javascripts %}
    <script>
        // Get the file input field and create a new image element
        const fileInput = document.getElementById('formFile');
        const previewImg = document.createElement('img');

        // Listen for changes to the file input field
        fileInput.addEventListener('change', function() {
            // Get the selected file and create a new file reader
            const file = this.files[0];
            const reader = new FileReader();

            // Set up the file reader to load the image file as a data URL
            reader.addEventListener('load', function() {
                previewImg.src = reader.result;
            }, false);

            // Read the selected file as a data URL
            if (file) {
                reader.readAsDataURL(file);
            }

            // Add the preview image to the form
            const formGroup = document.querySelector('.form-group.blog-image');
            formGroup.appendChild(previewImg);
        });
    </script>
{% endblock %}